<project name="stubs" default="windows" basedir=".">
  <description>stubs</description>
  <property environment="env"/>

  <!-- Requires cygwin/mingw in PATH -->
  <target name="windows" description="create windows stubs">
    <exec command="cl /I '${env.JAVA_HOME}/include' /I '${env.JAVA_HOME}/include/win32' windows.c user32.lib advapi32.lib /Fe: ../win64.exe /link /subsystem:windows /entry:mainCRTStartup"/>

    <exec command="cl /I '${env.JAVA_HOME}/include' /I '${env.JAVA_HOME}/include/win32' windows.c user32.lib advapi32.lib /Fe: ../win64c.exe /link /subsystem:console"/>

    <exec command="cl /I '${env.JAVA_HOME}/include' /I '${env.JAVA_HOME}/include/win32' /D_JF_SERVICE windows.c user32.lib advapi32.lib /Fe: ../win64s.exe /link /subsystem:console"/>
  </target>

  <target name="clean" description="deletes compiled files">
    <delete>
      <fileset dir="." includes="**/*.exe"/>
      <fileset dir="." includes="**/*.jar"/>
    </delete>
  </target>
</project>
